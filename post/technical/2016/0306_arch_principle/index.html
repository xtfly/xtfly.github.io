<!DOCTYPE HTML>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" /> 
    <title>软件设计原则 - 蘭陵N散記</title>
    <meta name="keywords" content="蘭陵N散記,兰陵,独立,博客,程序员,架构师,个人,思考,读书,笔记,技术,分享,Golang">
    
    <meta property="og:title" content="软件设计原则">
    <meta property="og:site_name" content="蘭陵N散記">
    <meta property="og:image" content="/img/author.jpg"> 
    <meta name="title" content="软件设计原则 - 蘭陵N散記" />
    <meta name="description" content="蘭陵N散記 | 博客 | 软件 | 架构 | Java | Golang"> 
    <link rel="shortcut icon" href="http://lanlingzi.cn/img/favicon.ico" />
    <link rel="apple-touch-icon" href="http://lanlingzi.cn/img/apple-touch-icon.png" />
    <link rel="apple-touch-icon-precomposed" href="http://lanlingzi.cn/img/apple-touch-icon.png" />
    <link href="http://lanlingzi.cn/js/vendor/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />
    <link href="http://lanlingzi.cn/js/vendor/fancybox/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />
    <link href="http://lanlingzi.cn/css/main.css" rel="stylesheet" type="text/css" />
    <link href="http://lanlingzi.cn/css/syntax.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
     fancybox: true, 
    motion: true
  };
</script>
</head>
<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">
<div class="container one-collumn sidebar-position-left page-home  ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"> <div class="site-meta  custom-logo ">

  <div class="custom-logo-site-title">
    <a href="http://lanlingzi.cn/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">蘭陵N散記</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">一指流沙，程序年华</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
    <ul id="menu" class="menu">
      
      
        <li class="menu-item ">
          <a href="http://lanlingzi.cn/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />首页
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://lanlingzi.cn/post/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />归档
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://lanlingzi.cn/about/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />关于
          </a>
        </li>
      
      <li class="menu-item menu-item-search">
        <a href="javascript:;" class="popup-trigger"> <i class="menu-item-icon fa fa-search fa-fw"></i> <br /> 搜索</a>
      </li>
    </ul>
    <div class="site-search">
      <div class="popup">
 <span class="search-icon fa fa-search"></span>
 <input type="text" id="local-search-input">
 <div id="local-search-result"></div>
 <span class="popup-btn-close">close</span>
</div>

    </div>
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
<section id="posts" class="posts-expand">
  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">
        <a class="post-title-link" href="http://lanlingzi.cn/post/technical/2016/0306_arch_principle/" itemprop="url">
        软件设计原则
        </a>
      </h1>
      <div class="post-meta">
      <span class="post-time">
<span class="post-meta-item-icon">
    <i class="fa fa-calendar-o"></i>
</span>
<span class="post-meta-item-text">时间：</span>
<time itemprop="dateCreated" datetime="2016-03-22T13:04:35+08:00" content="2016-03-06">
    2016-03-06
</time>
</span> 
      

  <span class="post-category" >
  &nbsp; | &nbsp;
  <span class="post-meta-item-icon">
    <i class="fa fa-folder-o"></i>
  </span>
  <span class="post-meta-item-text">分类：</span>
  
    <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
      <a href="http://lanlingzi.cn/categories/%E6%8A%80%E6%9C%AF" itemprop="url" rel="index">
        <span itemprop="name">技术</span>
      </a>
      &nbsp; 
    </span>
  
</span>


       <span>
&nbsp; | &nbsp;
<span class="post-meta-item-icon">
    <i class="fa fa-eye"></i>
</span>
<span class="post-meta-item-text">阅读：</span>
<span class="leancloud-visitors-count">3047 字 ~7分钟</span>
</span>
      </div>
    </header>
    <div class="post-body" itemprop="articleBody">
    <p>软件也像人一样，具有生命力，从出生到死亡，会经历多种变化。软件架构设计也不是一蹴而就的，是不断地演进发展。但为了能较好的发展，在软件设计时需要考虑一些原则。</p>

<h3 id="清晰原则-使用简洁接口-简单部件组合">清晰原则：使用简洁接口，简单部件组合</h3>

<ul>
<li>编程的本质就是要控制复杂度，后期维护会占用大部分的时间。</li>
<li>降低整体复杂度，用清晰的接口把若干简单模块组合成一个复杂的系统。</li>
<li>对外隐藏细节，“不要与陌生人说话”。</li>
<li>多数问题局限天一个局部，不要影响到全局。</li>
</ul>

<p>小结：本质是分而治之，复杂问题简单化，抽象框架，有序组全。</p>

<h3 id="清晰原则-清晰胜于机巧">清晰原则：清晰胜于机巧</h3>

<ul>
<li>代码直白易懂，代码是给人看的，不是给机器看的。</li>
<li>维护代码的人，其中也你包括你自己，善待代码，就是善待自己。</li>
<li>不要了一点性能提升而引入复杂的算法，不要为了炫耀技能而编写晦涩难懂的代码。</li>
<li>复杂晦涩的代码是Bugs的温床，高昂的维护成本将抵消可怜的性能提升。</li>
</ul>

<p>小结：代码简洁晚懂，谨慎引入复杂度。</p>

<h3 id="简洁原则-设计简洁-降低复杂">简洁原则：设计简洁，降低复杂</h3>

<ul>
<li>复杂问题简单化是一个设计者的能力体现，避免不必要的使用问题复杂化的因素。</li>
<li>在市场导向下，在不良的架构上很容易堆砌花哨无用的新特性，导致软件趋于复杂。</li>
<li>在进度压力下，不会做出各种折中的个性与不和谐的新特性开发。</li>
</ul>

<p>小结：过滤排序需求，追求稳定简洁。</p>

<h3 id="组合原则-组合-接拼-编排">组合原则：组合，接拼，编排</h3>

<ul>
<li>把复杂问题分解为一条程序处理链条。</li>
<li>程序之间可以通信，前者的输出是后者输入。</li>
<li>通信方式尽量采用简单协议，并且与语言无关。</li>
<li>组合程序之间无内部状态依赖，互相独立，处理链上下游不做假设，可替换。</li>
</ul>

<p>小结：面向微服务的设计。</p>

<h3 id="透明原则-设计与实现分离可见">透明原则：设计与实现分离可见</h3>

<ul>
<li>设计简单，包括流程、数据结构、接口，在代码级别容易理解。</li>
<li>支行时刻可通过输出信息或者接口查询运行状态，可控制程序是否正确运行。</li>
<li>执行调试链、健康状态可跟踪、可分析。</li>
</ul>

<p>小结：简单设计，简明实现，状态监控。</p>

<h3 id="吝啬原则-除非别无它法-不要编写庞大的程序">吝啬原则：除非别无它法，不要编写庞大的程序</h3>

<ul>
<li>程序庞大包括两个方面：程序体积大与程序复杂而维护困难。</li>
<li>模块和函数尺寸都有一个上限，比如单模板代码10K，单函数100L。</li>
<li>导致程序庞大的因素：先天设计不良，后天维护增加新特性。</li>
</ul>

<p>小结：合理设计，考虑扩展性，对庞大保护警惕。</p>

<h3 id="吝啬原则-有的放矢-按需分配资源">吝啬原则：有的放矢，按需分配资源</h3>

<ul>
<li>若可能，当一个事情发生时候再分配资源，而不是预先分配，初始化时静态分配最小资源，随着业务动态增加资源分配。</li>
<li>异步消息环境下，消息通信带来上下文切换，代价高昂。</li>
<li>必要时对消息数据合并，打包发送，减少对网络资源的消耗。</li>
<li>业务处理与消息发送分离，数据组织独立，统一打包发送。</li>
<li>控制并发实例的数据，分批处理，防止下游过载各实例之间的恶性竞争通信资源。</li>
</ul>

<p>小结：按需分配资源，珍惜消息通信机会。控制并发，避免消息突发。</p>

<h3 id="健壮原则-健壮源于透明与简洁">健壮原则：健壮源于透明与简洁</h3>

<ul>
<li>软件在超过设计者设想的意外场景下也能够运行良好。</li>
<li>Bugs是一种异常，复杂性和特殊处理都是Bugs的温床。</li>
<li>逻辑透明，接口简单有助于减少Bugs，即使出现Bugs也容易排除。</li>
<li>软件设计时要考虑异常输入，边界条件，和过载场景。</li>
<li>软件模块之间要处理流程上考虑能务匹配，流控，过载保护。</li>
</ul>

<p>小结：简单透明，处理能力匹配；考虑异常场景，提升健壮性；匹配上下游处理能力，闭环控制为主，开环控制为辅。</p>

<h3 id="表示原则-把知识叠入数据-简化统一处理逻辑">表示原则：把知识叠入数据，简化统一处理逻辑</h3>

<ul>
<li>数据抽象建模，使用数据之间的关联关系来体现业务逻辑，或者领域知识，使得业务处理逻辑代码简单一致稳定。</li>
<li>可通过修改数据模型可以支持新业务，逻辑处理代码不用修改。</li>
</ul>

<p>小结：领域模型驱动设计，数据数据提练来描述业务本质。</p>

<h3 id="缄默原则-只输出有用的信息">缄默原则：只输出有用的信息</h3>

<ul>
<li>保持沉默，良好的行为是默默地工作，决不唠唠叨叨，碍手碍脚，程序也是如此。</li>
<li>输出大量无用的信息会耗费资源，淹没重要信息，干扰维护人员定位问题。</li>
</ul>

<p>小结：沉默是金，惜时亦如金。输出的信息是必要的，有用的，不重复的。</p>

<h3 id="补救原则-异常时候-干净退出-输出详细信息">补救原则：异常时候，干净退出，输出详细信息</h3>

<ul>
<li>当程序出现异常时，输出必要信息，使用简单方法结束。</li>
<li>宽容地接受，严格地发送，提升程序的容错能力。</li>
<li>程序要么正确执行，要么响亮倒塌。</li>
</ul>

<p>小结：看待这个问题一分为二，选择异常恢复方法要保证对用户的业务逻辑影响最小为基本原则。因此并不是说所有的异常都是进程退出重启，有时可以告警，事件通知，让管理员来处理，给出明确的修复方案说明。</p>

<h3 id="经济原则-宁花机器一分钟-不花程序员一秒">经济原则：宁花机器一分钟，不花程序员一秒</h3>

<ul>
<li>对于一个问题，选择算法的时候宁愿选择一个简单，但可能是效率低一些的算法，也不要选择一个性能好但复杂度很高的算法。</li>
<li>硬件的进步来弥补性能的下降，换来的是程序简单可靠，维护成本低。</li>
</ul>

<p>小结：辩证地看问题，选择简单，把复杂留给机器，解放程序员。</p>

<h3 id="生成原则-避免手工hack-让程序去生成代码">生成原则：避免手工Hack，让程序去生成代码</h3>

<ul>
<li>人最不适合干大量重复细致的工作，或多或少都会出错，因此导致Bugs。</li>
<li>与此相反，计算机最适合干规则明确，重复枯燥的工作，而且不会出错。</li>
<li>对于一个规则明确的工作，一种可行的办法就是编写一个我程序，根据输入规则生成代码，让生成的代码去解决问题。</li>
</ul>

<p>小结：分析规则，能按照规则生成代码，可检查发现问题。</p>

<h3 id="优化原则-雕琢前先有原型-跑之前先学会走">优化原则：雕琢前先有原型，跑之前先学会走</h3>

<ul>
<li>90%的功能能够实现，比100%功能永远不能实现要好得多。</li>
<li>先求可行，再求正确，最后求快。</li>
<li>原型可能有效地解决关键技术，保证系统是可以实现的。</li>
<li>让客户看到可以执行的原型，对需求的理解更为准确，防止做无用功。</li>
<li>过早优化是万恶之源，过早地优化会破坏程序结构，代码与数据结构杂乱无章；过早优化不清晰系统瓶颈，局部优化破坏整体优化。</li>
</ul>

<p>小结：性能是设计出来，不是优化来出来。</p>

<h3 id="多样原则-拒绝封闭和唯一">多样原则：拒绝封闭和唯一</h3>

<ul>
<li>系统开放，只有开放，才能进步，才能得到最为广泛的验证。</li>
<li>开放，可扩展，用户可定制，符合实际需求和获到高可靠性。</li>
</ul>

<p>小结：系统开发，留给用户定制空间，毕竟需求具体多样性，我们不能穷尽，最终只有用户才能准确理解自己的需求。</p>

<h3 id="同源原则-避免重复-数据同源">同源原则：避免重复，数据同源</h3>

<ul>
<li>重复的代码不仅仅是浪费，也是Bugs的滋生之地。</li>
<li>出现大段代码重复，说明开发者缺少对代码控制与抽象提炼能务，优秀的工程轻易不会在进度压力下让步。</li>
<li>数据重复危害更大，一则浪费存储空间，二则容易出现不一致。</li>
<li>在性能允许的情况下，尽量共享数据或者按需订阅，避免全量订阅。</li>
<li>如果上述条件不具备，那么采用数据同源技术和一致性校验来保证数据的一致性。</li>
</ul>

<p>小结：拒绝重复，必须重复的时候考虑通过工具同源和一致性校验。</p>

<h3 id="扩展原则-设计时着眼未来-未来总比想象来得快">扩展原则：设计时着眼未来，未来总比想象来得快</h3>

<ul>
<li>对于一个一次性的程序来讲，架构和设计只会带来成本上升，复杂度提高，与性能的下降。</li>
<li>当开发一个支持多种产品的软件平台，其生命周期可能是十年以上。用户的需求是不断地变化，硬件环境也是不断地变化。</li>
<li>只有适应变化，不能拒绝变化，可扩展性是软件非功能属性中，在大部分情况下排在可靠性，高性能之前</li>
</ul>

<p>小结：不对外界进行假设，这些假设在时间面前都是脆弱的。</p>

<h3 id="扩展原则-给雪球寻找一个核心">扩展原则：给雪球寻找一个核心</h3>

<ul>
<li>雪球都有一个内核，尽管可能是一粒不起眼的小石头。</li>
<li>常说软件要内聚，内聚需要核心。</li>
<li>微内核，插件化机制。框架即核心，框架之上定制好插件，构建系统。</li>
<li>从问题知识域发现稳定部分进行抽象提升，成为系统的框架。</li>
</ul>

<p>小结：从框架的角度来看系统，框架之间的有机组合构建系统，系统的演化就是在框架稳定情况下增加替换相关的插件。</p>

<h3 id="扩展原则-扩展就是少修改">扩展原则：扩展就是少修改</h3>

<ul>
<li>软件可扩展性是有前提和应用场景的，不存在可以随意扩展的软件。</li>
<li>增加新功能做到不修改既有软件，代码无需修改，通过修改数据模型或者重新配置获得新特性。</li>
<li>修改集中在新增加的软件之上，也就是说在增加新特性时，对老代码封闭，对新代码新特性开放。</li>
</ul>

<p>小结：系统开闭原则，修改对系统稳定不构成影响。</p>

<hr />

<p>注：以上内容参考了公司设计原则。</p>
    </div>
    <footer class="post-footer">
     
 
<div class="post-tags">     
     
    <a href="http://lanlingzi.cn/tags/%e8%bd%af%e4%bb%b6%e8%ae%be%e8%ae%a1" rel="tag" title="软件设计">#软件设计#</a>
    
    <a href="http://lanlingzi.cn/tags/%e8%bd%af%e4%bb%b6%e6%9e%b6%e6%9e%84" rel="tag" title="软件架构">#软件架构#</a>
    
    <a href="http://lanlingzi.cn/tags/%e8%ae%be%e8%ae%a1%e5%8e%9f%e5%88%99" rel="tag" title="设计原则">#设计原则#</a>
    
</div>



     <div class="post-nav">
    <div class="post-nav-next post-nav-item">
    
        <a href="http://lanlingzi.cn/post/notes/2016/0313_grub_win10/" rel="next" title="Grub引导Win10">
        <i class="fa fa-chevron-left"></i> Grub引导Win10
        </a>
    
    </div>

    <div class="post-nav-prev post-nav-item">
    
        <a href="http://lanlingzi.cn/post/notes/2016/0221_mac_tmux/" rel="prev" title="使用tmux">
        使用tmux <i class="fa fa-chevron-right"></i>
        </a>
    
    </div>
</div>
      
     
     
     




    </footer>
  </article>
</section>

          </div>
        </div>
        <div class="sidebar-toggle">
  <div class="sidebar-toggle-line-wrap">
    <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
    <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
    <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
  </div>
</div>
<aside id="sidebar" class="sidebar">
  <div class="sidebar-inner">

    <section class="site-overview sidebar-panel  sidebar-panel-active ">
      <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image"
        src="http://lanlingzi.cn/img/author.jpg"
        alt="兰陵子" />
    <p class="site-author-name" itemprop="name">兰陵子</p>
    <p class="site-description motion-element" itemprop="description"> 
        Programmer &amp; Architect</p>
</div>
      <nav class="site-state motion-element">
    <div class="site-state-item site-state-posts">
      <a href="http://lanlingzi.cn/post/">
        <span class="site-state-item-count">101</span>
        <span class="site-state-item-name">日志</span>
      </a>
    </div>
    <div class="site-state-item site-state-categories">    
        <a href="http://lanlingzi.cn/categories/">      
         
        <span class="site-state-item-count">4</span>
        
        <span class="site-state-item-name">分类</span>
        
        </a>
    </div>

    <div class="site-state-item site-state-tags">
        <a href="http://lanlingzi.cn/tags/">
         
        <span class="site-state-item-count">56</span>
        
        <span class="site-state-item-name">标签</span>
        </a>
    </div>
</nav>
      
      
<div class="links-of-author motion-element">
    
        <span class="links-of-author-item">
        <a href="https://github.com/xtfly/" target="_blank" title="GitHub">
            <i class="fa fa-fw fa-github"></i>
            GitHub
        </a>
        </span>
    
        <span class="links-of-author-item">
        <a href="https://www.zhihu.com/people/lan-ling-xin-yun" target="_blank" title="知乎">
            <i class="fa fa-fw fa-globe"></i>
            知乎
        </a>
        </span>
    
</div>


      

      <div class="links-of-blogroll motion-element inline">
<script type="text/javascript" src="//rf.revolvermaps.com/0/0/8.js?i=5b4f2ucxar6&amp;m=0&amp;s=220&amp;c=ff0000&amp;cr1=ffffff&amp;f=arial&amp;l=33&amp;bv=35" async="async"></script>
</div>

    </section>
    
  </div>
</aside>

      </div>
    </main>
   
    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  <span itemprop="copyrightYear">  &copy; 
  2009 - 2019</span>
  <span class="with-love"><i class="fa fa-heart"></i></span>
  <span class="author" itemprop="copyrightHolder">蘭陵N散記</span>
</div>
<div class="powered-by">
  Powered by - <a class="theme-link" href="http://gohugo.io" target="_blank" title="hugo" >Hugo v0.55.3</a>
</div>
<div class="theme-info">
  Theme by - <a class="theme-link" href="https://github.com/xtfly/hugo-theme-next" target="_blank"> NexT
  </a>
</div>


      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
      <span id="scrollpercent"><span>0</span>%</span>
    </div>
  </div>

  <script>
    var _hmt = _hmt || [];
    (function() {
    var hm = document.createElement("script");
    hm.src = "//hm.baidu.com/hm.js?0b07433b4ab8d587dae7d34e71973839";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
    })();
</script>
<script type="text/javascript" src="http://tajs.qq.com/stats?sId=58416275" charset="UTF-8"></script> 
<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>
<script type="text/javascript" src="http://lanlingzi.cn/js/vendor/jquery/index.js?v=2.1.3"></script>
<script type="text/javascript" src="http://lanlingzi.cn/js/vendor/fastclick/lib/fastclick.min.js?v=1.0.6"></script> 
<script type="text/javascript" src="http://lanlingzi.cn/js/vendor/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
<script type="text/javascript" src="http://lanlingzi.cn/js/vendor/velocity/velocity.min.js?v=1.2.1"></script>
<script type="text/javascript" src="http://lanlingzi.cn/js/vendor/velocity/velocity.ui.min.js?v=1.2.1"></script>
<script src="http://lanlingzi.cn/js/vendor/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>

<script src="http://lanlingzi.cn/js/vendor/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>

<script type="text/javascript" src="http://lanlingzi.cn/js/utils.js"></script>
<script type="text/javascript" src="http://lanlingzi.cn/js/motion.js"></script>
<script type="text/javascript" src="http://lanlingzi.cn/js/affix.js"></script>
<script type="text/javascript" src="http://lanlingzi.cn/js/schemes/pisces.js"></script>

<script type="text/javascript" src="http://lanlingzi.cn/js/scrollspy.js"></script>
<script type="text/javascript" src="http://lanlingzi.cn/js/post-details.js"></script>
<script type="text/javascript" src="http://lanlingzi.cn/js/toc.js"></script>

<script type="text/javascript" src="http://lanlingzi.cn/js/bootstrap.js"></script>

<script type="text/javascript" src="http://lanlingzi.cn/js/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX", "output/HTML-CSS"],
    tex2jax: {
      inlineMath: [ ['$','$'] ],
      displayMath: [ ['$$','$$'] ],
      processEscapes: true
    },
    "HTML-CSS": { fonts: ["TeX"] }
  });
</script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML' async></script>
</body>
</html>