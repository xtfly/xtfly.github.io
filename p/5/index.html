<!DOCTYPE HTML>
<html lang="zh-CN">
<head>
	<meta name="generator" content="Hugo 0.88.1" />
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" /> 
    <title>蘭陵N梓記 - 蘭陵N梓記</title>
    <meta name="keywords" content="蘭陵N梓記,兰陵,独立,博客,程序员,架构师,个人,思考,读书,笔记,技术,分享,Java,Golang">
    
    <meta property="og:title" content="蘭陵N梓記">
    <meta property="og:site_name" content="蘭陵N梓記">
    <meta property="og:image" content="/img/author.jpg"> 
    <meta name="title" content="蘭陵N梓記 - 蘭陵N梓記" />
    <meta name="description" content="蘭陵N梓記 | 博客 | 软件 | 架构 | Java | Golang"> 
    <link rel="shortcut icon" href="http://lanlingzi.cn/img/favicon.ico" />
    <link rel="apple-touch-icon" href="http://lanlingzi.cn/img/apple-touch-icon.png" />
    <link rel="apple-touch-icon-precomposed" href="http://lanlingzi.cn/img/apple-touch-icon.png" />
    <link href="http://lanlingzi.cn/js/vendor/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />
    
    <link href="http://lanlingzi.cn/css/main.css" rel="stylesheet" type="text/css" />
    <link href="http://lanlingzi.cn/css/syntax.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: false, 
    motion: true
  };
</script>
</head>
<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">
<div class="container one-collumn sidebar-position-left page-home  ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"> <div class="site-meta  custom-logo ">

  <div class="custom-logo-site-title">
    <a href="http://lanlingzi.cn/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">蘭陵N梓記</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">一指流沙，程序年华</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
    <ul id="menu" class="menu">
      
      
        <li class="menu-item ">
          <a href="http://lanlingzi.cn/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />首页
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://lanlingzi.cn/post/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />归档
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://lanlingzi.cn/about/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />关于
          </a>
        </li>
      
      <li class="menu-item menu-item-search">
        <a href="javascript:;" class="popup-trigger"> <i class="menu-item-icon fa fa-search fa-fw"></i> <br /> 搜索</a>
      </li>
    </ul>
    <div class="site-search">
      <div class="popup">
 <span class="search-icon fa fa-search"></span>
 <input type="text" id="local-search-input">
 <div id="local-search-result"></div>
 <span class="popup-btn-close">close</span>
</div>

    </div>
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
    
 <section id="posts" class="posts-expand">

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">
        <a class="post-title-link" href="http://lanlingzi.cn/post/technical/2020/0523_code/" itemprop="url">
        飞哥讲代码2：把大象装进冰箱要几步
        </a>
      </h1>
      <div class="post-meta">
      <span class="post-time">
<span class="post-meta-item-icon">
    <i class="fa fa-calendar-o"></i>
</span>
<span class="post-meta-item-text">时间：</span>
<time itemprop="dateCreated" datetime="2016-03-22T13:04:35+08:00" content="2020-05-23">
    2020-05-23
</time>
</span> 
      

  <span class="post-category" >
  &nbsp; | &nbsp;
  <span class="post-meta-item-icon">
    <i class="fa fa-folder-o"></i>
  </span>
  <span class="post-meta-item-text">分类：</span>
  
    <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
      <a href="http://lanlingzi.cn/categories/%E6%8A%80%E6%9C%AF" itemprop="url" rel="index">
        <span itemprop="name">技术</span>
      </a>
      &nbsp; 
    </span>
  
</span>


       <span>
&nbsp; | &nbsp;
<span class="post-meta-item-icon">
    <i class="fa fa-eye"></i>
</span>
<span class="post-meta-item-text">阅读：</span>
<span class="leancloud-visitors-count">1806 字 ~4分钟</span>
</span>
      </div>
    </header>
    <div class="post-body" itemprop="articleBody">
    <h1 id="案例">案例</h1>
<p>下面的代码来自我们某一老产品源码(C语言)中：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c">VOS_INT <span style="color:#008b45">STARTER_Download</span>(VOD_VOID) {
    VOS_UINT32 count, sleepTimeLen;
    VOS_CHAR ascExcuteFile[INSTALL_MAX_DIRNAME_LEN]={ <span style="color:#b452cd">0</span> };
    VOS_BOOL enIsHaveUpdateOk = VOS_FALSE;
    VOS_INT siRet;

    BOOTTRACE(TRACE_TIP, <span style="color:#cd5555">&#34;Checking and updating files...&#34;</span>);

    <span style="color:#8b008b;font-weight:bold">if</span>(LOAD_Init()==VOS_FALSE) {
        BOOTTRACE(TRACE_ERR, <span style="color:#cd5555">&#34;The LOAD Init return error&#34;</span>);
        <span style="color:#8b008b;font-weight:bold">return</span> VOS_ERR;
    }

    siRet=LOAD_Begin(LD_STAGE_INSCHK, &amp;g_downloadFileCount, g_pstFileListInfo, LD_ONLINE_UPDATE);
    <span style="color:#8b008b;font-weight:bold">if</span>(siRet != VOS_OK) {
        LOAD_End();
        BOOTTRACE(TRACE_ERR, <span style="color:#cd5555">&#34;The LOAD Begin return error&#34;</span>);
        <span style="color:#8b008b;font-weight:bold">return</span> VOS_ERR;
    }

    <span style="color:#8b008b;font-weight:bold">while</span>(VOS_TRUE) {
        <span style="color:#8b008b;font-weight:bold">for</span>(count=<span style="color:#b452cd">0</span>;count&lt;g_downloadFileCount;count++) {
            <span style="color:#8b008b;font-weight:bold">if</span> (g_pstFileListInfo[count].enLoadCheckResult == LS_SUCESS_UPDATE ) {
                enIsHaveUpdateOk = VOS_TRUE;
            }
        }

        <span style="color:#8b008b;font-weight:bold">for</span>(count=<span style="color:#b452cd">0</span>;count&lt;g_downloadFileCount;count++) {
            <span style="color:#8b008b;font-weight:bold">if</span> (g_pstFileListInfo[count].enLoadCheckResult != LS_SUCESS_UPDATE &amp;&amp;
                (g_pstFileListInfo[count].enLoadCheckResult != LS_NOT_NEED_UPDATE) &amp;&amp;
                (g_pstFileListInfo[count].enLoadCheckResult != LS_OMU_NORESPONSE) &amp;&amp;
                (g_pstFileListInfo[count].enLoadCheckResult != LS_OMU_REFUSE)) {
                BOOTTRACE(TRACE_ERR, <span style="color:#cd5555">&#34;update file %s error and result=%d&#34;</span>,
                    g_pstFileListInfo[count].acFileName,
                    g_pstFileListInfo[count].enLoadCheckResult);
                <span style="color:#8b008b;font-weight:bold">break</span>;
            }

            <span style="color:#8b008b;font-weight:bold">if</span> ((g_pstFileListInfo[count].enLoadCheckResult != LS_OMU_NORESPONSE) &amp;&amp;
                (enIsHaveUpdateOk == VOS_TRUE) ) {
                BOOTTRACE(TRACE_ERR, <span style="color:#cd5555">&#34;Not all files are updated,download these file again&#34;</span>);
                <span style="color:#8b008b;font-weight:bold">break</span>;    
            }

            <span style="color:#8b008b;font-weight:bold">if</span> ((g_pstFileListInfo[count].enLoadCheckResult != LS_OMU_REFUSE) &amp;&amp;
                (enIsHaveUpdateOk == VOS_TRUE) ) {
                BOOTTRACE(TRACE_ERR, <span style="color:#cd5555">&#34;Not all files version are consistent with inschk,download these file again&#34;</span>);
                <span style="color:#8b008b;font-weight:bold">break</span>;    
            }

            <span style="color:#8b008b;font-weight:bold">if</span> ((g_pstFileListInfo[count].enLoadCheckResult != LS_OMU_NORESPONSE) &amp;&amp;
                (g_pstFileListInfo[count].bLocalCheck = VOS_FALSE) ) {
                BOOTTRACE(TRACE_ERR, <span style="color:#cd5555">&#34;Fail to connect witch OMU server and local file %s is uncertain, I will still download these files&#34;</span>, g_pstFileListInfo[count].acFileName);
                <span style="color:#8b008b;font-weight:bold">break</span>;    
            }

            <span style="color:#8b008b;font-weight:bold">if</span> ((g_pstFileListInfo[count].enLoadCheckResult != LS_OMU_REFUSE) &amp;&amp;
                (g_pstFileListInfo[count].bLocalCheck = VOS_FALSE) ) {
                BOOTTRACE(TRACE_ERR, <span style="color:#cd5555">&#34;OMU fesuse to update and %s local check result=%d or some file updated&#34;</span>, g_pstFileListInfo[count].acFileName, g_pstFileListInfo[count].bLocalCheck);
                <span style="color:#8b008b;font-weight:bold">break</span>;    
            }

            <span style="color:#8b008b;font-weight:bold">if</span> (g_pstFileListInfo[count].ucFileType == PROG_FILE_TYPE ) {
                siRet = snprintf_s(ascExcuteFile, <span style="color:#8b008b;font-weight:bold">sizeof</span>(ascExcuteFile),  <span style="color:#8b008b;font-weight:bold">sizeof</span>(ascExcuteFile)-<span style="color:#b452cd">1</span>,
                         <span style="color:#cd5555">&#34;%s/%s&#34;</span>, g_pstFileListInfo[count].acFileExecuteDir, g_pstFileListInfo[count].acFileName);
                <span style="color:#8b008b;font-weight:bold">if</span> (siRet &lt;= <span style="color:#b452cd">0</span> ) {
                    BOOTTRACE(TRACE_ERR, <span style="color:#cd5555">&#34;[%s:%d] snprintf_s failed,&#34;</span>, __FUNCTION__, __LINE__);
                    <span style="color:#8b008b;font-weight:bold">break</span>;
                }
                (<span style="color:#00688b;font-weight:bold">void</span>)chmod(ascExcuteFile, S_IRUSE | S_IXUSR);
            }
        }

        <span style="color:#8b008b;font-weight:bold">if</span> (count == g_downloadFileCount) {
            BOOTTRACE(TRACE_TIP, <span style="color:#cd5555">&#34;All %d files checked or updated OK.&#34;</span>, g_downloadFileCount);
            <span style="color:#8b008b;font-weight:bold">for</span>(count=<span style="color:#b452cd">0</span>;count&lt;g_downloadFileCount;count++) {
                BOOTTRACE(TRACE_LOD, <span style="color:#cd5555">&#34;%d update result is %d and local check result is %d.&#34;</span>,
                 g_pstFileListInfo[count].acFileName, g_pstFileListInfo[count].enLoadCheckResult,
                 g_pstFileListInfo[count].bLocalCheck);
            }
            <span style="color:#8b008b;font-weight:bold">break</span>;
        } <span style="color:#8b008b;font-weight:bold">else</span> {
            <span style="color:#8b008b;font-weight:bold">if</span> (g_pstFileListInfo[count].enLoadCheckResult == LS_DISK_FULL){
                sleepTimeLen=INSTALL_DISK_FULL_AGAIN_TIMELEN;
            } <span style="color:#8b008b;font-weight:bold">else</span> {
                sleepTimeLen=INSTALL_CONNECT_OMU_AGAIN_TIMELEN;
            }

            BOOTTRACE(TRACE_ERR, <span style="color:#cd5555">&#34;Update file error so sleep for %d second and try again&#34;</span>, sleepTimeLen);
            SLEEP(sleepTimeLen);

            siRet=LOAD_Begin(LD_STAGE_INSCHK, &amp;g_downloadFileCount, g_pstFileListInfo, LD_ONLINE_UPDATE);
            <span style="color:#8b008b;font-weight:bold">if</span>(siRet != VOS_OK) {
                LOAD_End();
                BOOTTRACE(TRACE_ERR, <span style="color:#cd5555">&#34;The LOAD Begin return error&#34;</span>);
                <span style="color:#8b008b;font-weight:bold">return</span> VOS_ERR;
            }
        }
    }

    BOOTTRACE(TRACE_DBG, <span style="color:#cd5555">&#34;Exit STARTER_Download&#34;</span>);
    LOAD_End();
    <span style="color:#8b008b;font-weight:bold">return</span> VOS_OK;
}
</code></pre></div><p>上面的代码我已是删除了每个条件判断的注释，但是代码看起还是有点长。如果不仔细读，还真不看出不函数完成的功能。再来看优化重构之后的代码：</p>
    </div>
    
    <div class="post-more-link text-center">
    <a class="btn" href="http://lanlingzi.cn/post/technical/2020/0523_code/" rel="contents">
      阅读全文 &raquo;
    </a>
    </div>
    
    <footer class="post-footer"><div class="post-eof"></div></footer>
  </article>

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">
        <a class="post-title-link" href="http://lanlingzi.cn/post/technical/2020/0516_code/" itemprop="url">
        飞哥讲代码1：确保资源被释放
        </a>
      </h1>
      <div class="post-meta">
      <span class="post-time">
<span class="post-meta-item-icon">
    <i class="fa fa-calendar-o"></i>
</span>
<span class="post-meta-item-text">时间：</span>
<time itemprop="dateCreated" datetime="2016-03-22T13:04:35+08:00" content="2020-05-16">
    2020-05-16
</time>
</span> 
      

  <span class="post-category" >
  &nbsp; | &nbsp;
  <span class="post-meta-item-icon">
    <i class="fa fa-folder-o"></i>
  </span>
  <span class="post-meta-item-text">分类：</span>
  
    <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
      <a href="http://lanlingzi.cn/categories/%E6%8A%80%E6%9C%AF" itemprop="url" rel="index">
        <span itemprop="name">技术</span>
      </a>
      &nbsp; 
    </span>
  
</span>


       <span>
&nbsp; | &nbsp;
<span class="post-meta-item-icon">
    <i class="fa fa-eye"></i>
</span>
<span class="post-meta-item-text">阅读：</span>
<span class="leancloud-visitors-count">2345 字 ~5分钟</span>
</span>
      </div>
    </header>
    <div class="post-body" itemprop="articleBody">
    <h1 id="案例">案例</h1>
<p>下面的代码来自我们某一工具源码(Python语言)中：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">file_gz = gzip.GzipFile(file_name)
src_path, src_file = os.path.split(file_name)
tmp_file_name = os.path.join(path_name, src_file).strip(<span style="color:#cd5555">&#39;gz&#39;</span>).strip(<span style="color:#cd5555">&#39;.&#39;</span>)
tmp_file = <span style="color:#658b00">open</span>(tmp_file_name, <span style="color:#cd5555">&#39;wb&#39;</span>)
tmp_file.writeline(file_gz.realines())
file_gz.close()
tmp_file.close()
os.remove(file_name)
</code></pre></div><p>从代码健壮角度来看，存在如下两个问题：</p>
<ul>
<li>缺少捕获异常，在GzipFile打开文件，open打开文件之后的操作都可能抛出异常</li>
<li>当抛出异常时，file_gz与tmp_file就会出现未正常close，存在文件句柄的泄露问题</li>
</ul>
<p>能正确释放资源的建议写法是:</p>
    </div>
    
    <div class="post-more-link text-center">
    <a class="btn" href="http://lanlingzi.cn/post/technical/2020/0516_code/" rel="contents">
      阅读全文 &raquo;
    </a>
    </div>
    
    <footer class="post-footer"><div class="post-eof"></div></footer>
  </article>

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">
        <a class="post-title-link" href="http://lanlingzi.cn/post/thoughts/2020/0329_read/" itemprop="url">
        阅读
        </a>
      </h1>
      <div class="post-meta">
      <span class="post-time">
<span class="post-meta-item-icon">
    <i class="fa fa-calendar-o"></i>
</span>
<span class="post-meta-item-text">时间：</span>
<time itemprop="dateCreated" datetime="2016-03-22T13:04:35+08:00" content="2020-03-29">
    2020-03-29
</time>
</span> 
      

  <span class="post-category" >
  &nbsp; | &nbsp;
  <span class="post-meta-item-icon">
    <i class="fa fa-folder-o"></i>
  </span>
  <span class="post-meta-item-text">分类：</span>
  
    <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
      <a href="http://lanlingzi.cn/categories/%E6%84%9F%E6%83%B3" itemprop="url" rel="index">
        <span itemprop="name">感想</span>
      </a>
      &nbsp; 
    </span>
  
</span>


       <span>
&nbsp; | &nbsp;
<span class="post-meta-item-icon">
    <i class="fa fa-eye"></i>
</span>
<span class="post-meta-item-text">阅读：</span>
<span class="leancloud-visitors-count">850 字 ~2分钟</span>
</span>
      </div>
    </header>
    <div class="post-body" itemprop="articleBody">
    <p>生于80后，长相70后的我们，不知不觉已将跨入不惑不年。但还是为了房子、孩子、票子日复一日地忙碌工作，曾经年少的理想也慢慢被岁月磨平，也根本没有精力抽出一丁点的时间来读一本书，仰望一下星空。有人说：一日不读书，无人看得出；一周不读书，开始会爆粗；一月不读书，智商输给猪。当停下手中的工作工作，才发现自己知识结构那么地匮乏。</p>
<p>曾经梦想把阅读当成生活的重要组成部分，把阅读当作精神升华的方式。有自己一个独立的书房，书柜上摆上经典的、实用的、消遣的书籍，在空闲的时间里抱上一本细细咀嚼，娴静地阅读，享受书的世界，感受书的力量。</p>
<p>有些事，我们明知道是错的，也要去坚持，因为不甘心；有时候，我们明知道没有路了，却还在前行，因为习惯了。没有正确的方向，再多报努力也可能没有结果。阅读才能使自己的内心强大，也不会陷入死胡同，走正确的路，即时放弃错误的持着。</p>
    </div>
    
    <div class="post-more-link text-center">
    <a class="btn" href="http://lanlingzi.cn/post/thoughts/2020/0329_read/" rel="contents">
      阅读全文 &raquo;
    </a>
    </div>
    
    <footer class="post-footer"><div class="post-eof"></div></footer>
  </article>

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">
        <a class="post-title-link" href="http://lanlingzi.cn/post/technical/2020/0322_engining/" itemprop="url">
        软件工程文化
        </a>
      </h1>
      <div class="post-meta">
      <span class="post-time">
<span class="post-meta-item-icon">
    <i class="fa fa-calendar-o"></i>
</span>
<span class="post-meta-item-text">时间：</span>
<time itemprop="dateCreated" datetime="2016-03-22T13:04:35+08:00" content="2020-03-22">
    2020-03-22
</time>
</span> 
      

  <span class="post-category" >
  &nbsp; | &nbsp;
  <span class="post-meta-item-icon">
    <i class="fa fa-folder-o"></i>
  </span>
  <span class="post-meta-item-text">分类：</span>
  
    <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
      <a href="http://lanlingzi.cn/categories/%E6%8A%80%E6%9C%AF" itemprop="url" rel="index">
        <span itemprop="name">技术</span>
      </a>
      &nbsp; 
    </span>
  
</span>


       <span>
&nbsp; | &nbsp;
<span class="post-meta-item-icon">
    <i class="fa fa-eye"></i>
</span>
<span class="post-meta-item-text">阅读：</span>
<span class="leancloud-visitors-count">1438 字 ~3分钟</span>
</span>
      </div>
    </header>
    <div class="post-body" itemprop="articleBody">
    <h1 id="软件危机">软件危机</h1>
<p>软件工程师的困惑：软件具有太多的不确定性，软件工程师每天日复一日的工作，大多数面对的都是自己目前不知道答案的问题。我们依赖着过去的经验，朝着大致的方向，努力地解决一个又一个问题。但历史的经验并不解决未来的问题，反面太多成功的经验可能会让我们陷入经验主义。我们也会经常责怪前人犯下的错误，需要我们去应对。我们讨厌需求的变更，它让我们曾经的付出付诸东流。变更是软件开发中不可避免的，所以我们在任何的阶段都要去适应变。即使软件发布了，也不可能一劳永逸，它像一个生命体还得继续维护。</p>
<p>从软件项目管理角度的困惑，软件存在所谓的软件危机：软件的开发进度难以预测；软件的开发成本难以控制；软件的功能难以满足用户；软件的产品质量无法保证；软件产品难以维护&hellip;..</p>
    </div>
    
    <div class="post-more-link text-center">
    <a class="btn" href="http://lanlingzi.cn/post/technical/2020/0322_engining/" rel="contents">
      阅读全文 &raquo;
    </a>
    </div>
    
    <footer class="post-footer"><div class="post-eof"></div></footer>
  </article>

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">
        <a class="post-title-link" href="http://lanlingzi.cn/post/technical/2019/1013_opensource/" itemprop="url">
        开源软件知识
        </a>
      </h1>
      <div class="post-meta">
      <span class="post-time">
<span class="post-meta-item-icon">
    <i class="fa fa-calendar-o"></i>
</span>
<span class="post-meta-item-text">时间：</span>
<time itemprop="dateCreated" datetime="2016-03-22T13:04:35+08:00" content="2019-10-13">
    2019-10-13
</time>
</span> 
      

  <span class="post-category" >
  &nbsp; | &nbsp;
  <span class="post-meta-item-icon">
    <i class="fa fa-folder-o"></i>
  </span>
  <span class="post-meta-item-text">分类：</span>
  
    <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
      <a href="http://lanlingzi.cn/categories/%E6%8A%80%E6%9C%AF" itemprop="url" rel="index">
        <span itemprop="name">技术</span>
      </a>
      &nbsp; 
    </span>
  
</span>


       <span>
&nbsp; | &nbsp;
<span class="post-meta-item-icon">
    <i class="fa fa-eye"></i>
</span>
<span class="post-meta-item-text">阅读：</span>
<span class="leancloud-visitors-count">3804 字 ~8分钟</span>
</span>
      </div>
    </header>
    <div class="post-body" itemprop="articleBody">
    <h1 id="什么是开源软件">什么是开源软件</h1>
<p>开放源代码促进会（OSI：Open Source Initiative），是一个致力于推动开源软件发展的非盈利组织。</p>
<p>开源软件（OSS：Open Source Softwar）即开放源代码软件，其定义首先起源于自由软件（FS：Free Software）。OSI将开放源码定义为：“开放源码，通过支持源代码的独立同行评议和快速发展演变，提高了软件的可靠性和质量。要通过 OSI 认证，软件必须在获得许可证的情况下发布，该许可证可保证免费读取、重新发布、修改和使用该软件的权利。</p>
<p>开源软件的特点：可自由使用、无任何担保、无许可费、可获得源代码、享有版本、有特定License</p>
<p>开源软件的三大组成要素；</p>
<ul>
<li>License：是游戏规则 ，有严密的组织监管</li>
<li>社区是组织方式：是其发展的核心学问所在，主要特征：无明确路标、子项目充分竞争、充分的对等评审、用户充分参与、源码发布、经常发布，Internet发布。</li>
<li>商业模式是本质：模式并不是其独有的，主要包括：捐赠、技术服务、广告、增值产品，双重授权、软硬件结合等。</li>
</ul>
    </div>
    
    <div class="post-more-link text-center">
    <a class="btn" href="http://lanlingzi.cn/post/technical/2019/1013_opensource/" rel="contents">
      阅读全文 &raquo;
    </a>
    </div>
    
    <footer class="post-footer"><div class="post-eof"></div></footer>
  </article>

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">
        <a class="post-title-link" href="http://lanlingzi.cn/post/technical/2019/1006_java_base_10/" itemprop="url">
        跟我一起复习Java-10：工具体系
        </a>
      </h1>
      <div class="post-meta">
      <span class="post-time">
<span class="post-meta-item-icon">
    <i class="fa fa-calendar-o"></i>
</span>
<span class="post-meta-item-text">时间：</span>
<time itemprop="dateCreated" datetime="2016-03-22T13:04:35+08:00" content="2019-10-06">
    2019-10-06
</time>
</span> 
      

  <span class="post-category" >
  &nbsp; | &nbsp;
  <span class="post-meta-item-icon">
    <i class="fa fa-folder-o"></i>
  </span>
  <span class="post-meta-item-text">分类：</span>
  
    <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
      <a href="http://lanlingzi.cn/categories/%E6%8A%80%E6%9C%AF" itemprop="url" rel="index">
        <span itemprop="name">技术</span>
      </a>
      &nbsp; 
    </span>
  
</span>


       <span>
&nbsp; | &nbsp;
<span class="post-meta-item-icon">
    <i class="fa fa-eye"></i>
</span>
<span class="post-meta-item-text">阅读：</span>
<span class="leancloud-visitors-count">4343 字 ~9分钟</span>
</span>
      </div>
    </header>
    <div class="post-body" itemprop="articleBody">
    <h1 id="jvmti">JVMTI</h1>
<p>JVMTI（Java VM Tool Interface）就是JVM对外暴露的接口。</p>
<p>JVMTI 本质上是在JVM内部的许多事件进行了埋点。通过这些埋点可以给外部提供当前上下文的一些信息。甚至可以接受外部的命令来改变下一步的动作。外部程序一般利用C/C++实现一个JVMTI Agent，在Agent里面注册一些JVM事件的回调。当事件发生时JVMTI调用这些回调方法。Agent可以在回调方法里面实现自己的逻辑。JVMTI Agent是以动态链接库的形式被虚拟机加载的。</p>
<p>JVMTI Agent启动方式： <code>-agentlib:&lt;agent-lib-name&gt;=&lt;options&gt;</code></p>
<p>JVMTI Agent回调函数：</p>
<ul>
<li>OnLoad阶段： 调用动态库的Agent_OnLoad函数</li>
<li>Live阶段： 调用动态库的Agent_OnAttach函数</li>
<li>关闭阶段：调用动态库的Agent_OnUnload函数</li>
</ul>
    </div>
    
    <div class="post-more-link text-center">
    <a class="btn" href="http://lanlingzi.cn/post/technical/2019/1006_java_base_10/" rel="contents">
      阅读全文 &raquo;
    </a>
    </div>
    
    <footer class="post-footer"><div class="post-eof"></div></footer>
  </article>

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">
        <a class="post-title-link" href="http://lanlingzi.cn/post/technical/2019/1005_java_base_9/" itemprop="url">
        跟我一起复习Java-9：JNI/JIT/SM
        </a>
      </h1>
      <div class="post-meta">
      <span class="post-time">
<span class="post-meta-item-icon">
    <i class="fa fa-calendar-o"></i>
</span>
<span class="post-meta-item-text">时间：</span>
<time itemprop="dateCreated" datetime="2016-03-22T13:04:35+08:00" content="2019-10-05">
    2019-10-05
</time>
</span> 
      

  <span class="post-category" >
  &nbsp; | &nbsp;
  <span class="post-meta-item-icon">
    <i class="fa fa-folder-o"></i>
  </span>
  <span class="post-meta-item-text">分类：</span>
  
    <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
      <a href="http://lanlingzi.cn/categories/%E6%8A%80%E6%9C%AF" itemprop="url" rel="index">
        <span itemprop="name">技术</span>
      </a>
      &nbsp; 
    </span>
  
</span>


       <span>
&nbsp; | &nbsp;
<span class="post-meta-item-icon">
    <i class="fa fa-eye"></i>
</span>
<span class="post-meta-item-text">阅读：</span>
<span class="leancloud-visitors-count">3911 字 ~8分钟</span>
</span>
      </div>
    </header>
    <div class="post-body" itemprop="articleBody">
    <h1 id="jni">JNI</h1>
<p>JNI是Java Native Interface的缩写，通过使用 Java本地接口书写程序，可以确保代码在不同的平台上方便移植。JNI标准成为java平台的一部分，它允许Java代码和其他语言写的代码进行交互。JNI一开始是为了本地已编译语言，尤其是C和C++而设计的，但是它并不妨碍你使用其他编程语言，只要调用约定受支持就可以了。</p>
<p>JNI开发流程主要分为以下6步：</p>
<ol>
<li>编写声明了native方法的Java类</li>
<li>将Java源代码编译成class字节码文件</li>
<li>用javah -jni命令生成.h头文件（javah是jdk自带的一个命令，-jni参数表示将class中用native声明的函数生成jni规则的函数）</li>
<li>用本地代码实现.h头文件中的函数</li>
<li>将本地代码编译成动态库（<code>windows：*.dll，linux/unix：*.so，mac os x：*.jnilib</code>）</li>
<li>拷贝动态库至 java.library.path 本地库搜索目录下，并运行Java程序</li>
</ol>
    </div>
    
    <div class="post-more-link text-center">
    <a class="btn" href="http://lanlingzi.cn/post/technical/2019/1005_java_base_9/" rel="contents">
      阅读全文 &raquo;
    </a>
    </div>
    
    <footer class="post-footer"><div class="post-eof"></div></footer>
  </article>

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">
        <a class="post-title-link" href="http://lanlingzi.cn/post/technical/2019/1004_java_base_8/" itemprop="url">
        跟我一起复习Java-8：内存模型
        </a>
      </h1>
      <div class="post-meta">
      <span class="post-time">
<span class="post-meta-item-icon">
    <i class="fa fa-calendar-o"></i>
</span>
<span class="post-meta-item-text">时间：</span>
<time itemprop="dateCreated" datetime="2016-03-22T13:04:35+08:00" content="2019-10-04">
    2019-10-04
</time>
</span> 
      

  <span class="post-category" >
  &nbsp; | &nbsp;
  <span class="post-meta-item-icon">
    <i class="fa fa-folder-o"></i>
  </span>
  <span class="post-meta-item-text">分类：</span>
  
    <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
      <a href="http://lanlingzi.cn/categories/%E6%8A%80%E6%9C%AF" itemprop="url" rel="index">
        <span itemprop="name">技术</span>
      </a>
      &nbsp; 
    </span>
  
</span>


       <span>
&nbsp; | &nbsp;
<span class="post-meta-item-icon">
    <i class="fa fa-eye"></i>
</span>
<span class="post-meta-item-text">阅读：</span>
<span class="leancloud-visitors-count">6803 字 ~14分钟</span>
</span>
      </div>
    </header>
    <div class="post-body" itemprop="articleBody">
    <h1 id="内存模型">内存模型</h1>
<p><img src="http://lanlingzi.cn/images/java/java_memory3.webp" alt="java_memory3.png"></p>
<h2 id="堆">堆</h2>
<p>堆（Heap）是JVM所管理的内存中最大的一块内存区域，也是被各个线程共享的内存区域，该内存区域存放了对象实例及数组（但不是所有的对象实例都在堆中）。堆由垃圾收集器自动回收，是OOM故障最主要的发源地。</p>
<p>通过下两个参数来分配堆使用的内存大小：</p>
<ul>
<li>-Xms：最小堆容量，默认是物理内存的1/64。</li>
<li>-Xmx：最大堆容量，默认是物理内存的1/4。</li>
</ul>
    </div>
    
    <div class="post-more-link text-center">
    <a class="btn" href="http://lanlingzi.cn/post/technical/2019/1004_java_base_8/" rel="contents">
      阅读全文 &raquo;
    </a>
    </div>
    
    <footer class="post-footer"><div class="post-eof"></div></footer>
  </article>

</section>
















<nav class="pagination">
    <a class="extend prev" rel="prev" href="http://lanlingzi.cn/p/4/"><i class="fa fa-angle-left"></i></a>
    
        
        
          <a class="page-number" href="http://lanlingzi.cn/">1</a>
        
        
    
        
        
          <a class="page-number" href="http://lanlingzi.cn/p/2/">2</a>
        
        
    
        
        
          <a class="page-number" href="http://lanlingzi.cn/p/3/">3</a>
        
        
    
        
        
          <a class="page-number" href="http://lanlingzi.cn/p/4/">4</a>
        
        
    
        
        
          <span class="page-number current">5</span>
        
        
    
        
        
          <a class="page-number" href="http://lanlingzi.cn/p/6/">6</a>
        
        
    
        
        
          <a class="page-number" href="http://lanlingzi.cn/p/7/">7</a>
        
        
    
        
        
          <a class="page-number" href="http://lanlingzi.cn/p/8/">8</a>
        
        
    
        
        
          <a class="page-number" href="http://lanlingzi.cn/p/9/">9</a>
        
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
    <a class="extend next" rel="next" href="http://lanlingzi.cn/p/6/"><i class="fa fa-angle-right"></i></a>
</nav>




          </div>
        </div>
        <div class="sidebar-toggle">
  <div class="sidebar-toggle-line-wrap">
    <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
    <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
    <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
  </div>
</div>
<aside id="sidebar" class="sidebar">
  <div class="sidebar-inner">

    <section class="site-overview sidebar-panel  sidebar-panel-active ">
      <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image"
        src="http://lanlingzi.cn/img/author.jpg"
        alt="兰陵子" />
    <p class="site-author-name" itemprop="name">兰陵子</p>
    <p class="site-description motion-element" itemprop="description"> 
        Programmer &amp; Architect</p>
</div>
      <nav class="site-state motion-element">
    <div class="site-state-item site-state-posts">
      <a href="http://lanlingzi.cn/post/">
        <span class="site-state-item-count">157</span>
        <span class="site-state-item-name">日志</span>
      </a>
    </div>
    <div class="site-state-item site-state-categories">    
        <a href="http://lanlingzi.cn/categories/">      
         
        <span class="site-state-item-count">4</span>
        
        <span class="site-state-item-name">分类</span>
        
        </a>
    </div>

    <div class="site-state-item site-state-tags">
        <a href="http://lanlingzi.cn/tags/">
         
        <span class="site-state-item-count">57</span>
        
        <span class="site-state-item-name">标签</span>
        </a>
    </div>
</nav>
      
<div class="feed-link motion-element">
<a href="http://lanlingzi.cn/index.xml" rel="alternate" type="application/rss+xml" target="_blank">
    <i class="fa fa-rss"></i>
    RSS 订阅
</a>
</div>

      
<div class="links-of-author motion-element">
    
        <span class="links-of-author-item">
        <a href="https://github.com/xtfly/" target="_blank" title="GitHub">
            <i class="fa fa-fw fa-github"></i>
            GitHub
        </a>
        </span>
    
        <span class="links-of-author-item">
        <a href="https://www.zhihu.com/people/lan-ling-xin-yun" target="_blank" title="知乎">
            <i class="fa fa-fw fa-globe"></i>
            知乎
        </a>
        </span>
    
</div>


      

      <div class="links-of-blogroll motion-element inline">
<script type="text/javascript" src="//rf.revolvermaps.com/0/0/8.js?i=5b4f2ucxar6&amp;m=0&amp;s=220&amp;c=ff0000&amp;cr1=ffffff&amp;f=arial&amp;l=33&amp;bv=35" async="async"></script>
</div>

    </section>
    
  </div>
</aside>

      </div>
    </main>
   
    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  <span itemprop="copyrightYear">  &copy; 
  2009 - 2022</span>
  <span class="with-love"><i class="fa fa-heart"></i></span>
  <span class="author" itemprop="copyrightHolder">蘭陵N梓記</span>
</div>
<div class="powered-by">
  Powered by - <a class="theme-link" href="http://gohugo.io" target="_blank" title="hugo" >Hugo v0.88.1</a>
</div>
<div class="theme-info">
  Theme by - <a class="theme-link" href="https://github.com/xtfly/hugo-theme-next" target="_blank"> NexT
  </a>
</div>


      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
      <span id="scrollpercent"><span>0</span>%</span>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>
<script type="text/javascript" src="http://lanlingzi.cn/js/vendor/jquery/index.js?v=2.1.3"></script>
<script type="text/javascript" src="http://lanlingzi.cn/js/vendor/fastclick/lib/fastclick.min.js?v=1.0.6"></script> 
<script type="text/javascript" src="http://lanlingzi.cn/js/vendor/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
<script type="text/javascript" src="http://lanlingzi.cn/js/vendor/velocity/velocity.min.js?v=1.2.1"></script>
<script type="text/javascript" src="http://lanlingzi.cn/js/vendor/velocity/velocity.ui.min.js?v=1.2.1"></script>
<script src="http://lanlingzi.cn/js/vendor/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>

<script type="text/javascript" src="http://lanlingzi.cn/js/utils.js"></script>
<script type="text/javascript" src="http://lanlingzi.cn/js/motion.js"></script>
<script type="text/javascript" src="http://lanlingzi.cn/js/affix.js"></script>
<script type="text/javascript" src="http://lanlingzi.cn/js/schemes/pisces.js"></script>

<script type="text/javascript" src="http://lanlingzi.cn/js/bootstrap.js"></script>

<script type="text/javascript" id="motion.page.archive">
  $('.archive-year').velocity('transition.slideLeftIn');
</script>

<script type="text/javascript" src="http://lanlingzi.cn/js/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX", "output/HTML-CSS"],
    tex2jax: {
      inlineMath: [ ['$','$'] ],
      displayMath: [ ['$$','$$'] ],
      processEscapes: true
    },
    "HTML-CSS": { fonts: ["TeX"] }
  });
</script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML' async></script>
</body>
</html>